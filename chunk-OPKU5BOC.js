import{a as T,b as y,e as L}from"./chunk-MNXY6R3H.js";import"./chunk-LG3ESZ4H.js";import{Bd as v,Cd as S,Fd as C,Mb as r,Nb as u,Ra as p,Sa as a,Vb as b,X as h,dc as g,ec as f,ee as E,g as c,ub as n,vb as o,wb as m}from"./chunk-IFPKIGQ4.js";var j=(()=>{let s=class s{constructor(e,t,i,l){this.dataTableService=e,this.dataService=t,this.sharedModalService=i,this.messageService=l,this.subscription=new c,this.skip=0,this.take=10,this.columns=[{field:"title",header:"TITLE",type:"text",canSort:!1},{field:"channel_title",header:"CHANNEL_TITLE",type:"text",canSort:!1},{field:"project_title",header:"PROJECT_TITLE",type:"text",canSort:!1},{field:"url",header:"URL",type:"url",canSort:!1}],this.actions=[{label:"GET_FORM",icon:"assets/images/code-action.svg",function:this.onEdit.bind(this),classes:["alert-purple"],btnConditionBasedField:""},{label:"COPY_URL",icon:"assets/images/copy-action.svg",function:this.copyUrlToClipboard.bind(this),btnConditionBasedField:""},{label:"EDIT",icon:"assets/images/edit-action.svg",function:this.onEdit.bind(this),btnConditionBasedField:""},{label:"DELETE",icon:"assets/images/delete-action.svg",function:this.onDelete.bind(this),btnConditionBasedField:""}],e.cols=this.columns,e.isLoading=!1,e.hasPaginator=!0,e.hasFlatActions=!0,e.actionsFlat=this.actions}ngOnInit(){this.getData(),this.getPageChanged()}getData(){this.dataTableService.isLoading=!0,this.subscription.add(this.dataService.getFn(`landpage/get/bulk/${this.skip}/${this.take}`).subscribe(e=>{this.dataTableService.isLoading=!1,this.dataTableService.totalRecords=e?.total,this.dataTableService.rows.set(e?.list)}))}onEdit(e){}onDelete(e){let t={title:"Are you sure to delete this Item?",message:"",type:"error",btnLabel:"DELETE"};this.sharedModalService.confirmCard(t).onClose.subscribe(i=>{i=="confirm"&&this.deleteChannel(e)})}deleteChannel(e){let t=e.landpage_id;this.subscription.add(this.dataService.deleteFn(`landpage/delete/${t}`).subscribe(i=>{i?.status&&this.sharedModalService.successBasicCard({title:i?.message,message:"",btnLabel:"OKAY"}).onClose.subscribe(l=>{this.getData()})}))}getPageChanged(){this.subscription.add(this.dataTableService.getPageChanged().subscribe(e=>{this.skip=e.page*e.rows,this.take=e.rows,this.getData()}))}copyUrlToClipboard(e){let t=e.url,i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),this.messageService.add({severity:"success",summary:"Success",detail:"URL copied to clipboard"})}};s.\u0275fac=function(t){return new(t||s)(a(T),a(C),a(L),a(E))},s.\u0275cmp=h({type:s,selectors:[["app-land-pages-list"]],standalone:!0,features:[b],decls:9,vars:3,consts:[[1,"p-4"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","bg-btn","text-white"],[1,"position-relative","shadow","rounded"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),r(3),g(4,"translate"),o(),n(5,"button",2),r(6,"New Land Page"),o()(),n(7,"div",3),m(8,"data-table"),o()()),t&2&&(p(3),u(f(4,1,"LANDPAGE")))},dependencies:[y,S,v]});let d=s;return d})();export{j as LandPagesListComponent};
