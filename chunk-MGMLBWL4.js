import{a as E,b as D,e as I}from"./chunk-MNXY6R3H.js";import"./chunk-LG3ESZ4H.js";import{Bd as g,Cd as v,Fd as S,Mb as d,Nb as u,Ra as h,Sa as n,Vb as b,X as c,dc as m,ec as f,g as l,ub as a,vb as o,wb as p}from"./chunk-IFPKIGQ4.js";var M=(()=>{let i=class i{constructor(t,e,s){this.dataTableService=t,this.dataService=e,this.sharedModalService=s,this.subscription=new l,this.skip=0,this.take=10,this.columns=[{field:"title",header:"TITLE",type:"text",canSort:!1},{field:"type",header:"TYPE",type:"text",canSort:!1}],this.actions=[{label:"PIN",icon:"assets/images/pin.svg",function:this.onEdit.bind(this),btnConditionBasedField:""},{label:"EDIT",icon:"assets/images/edit-action.svg",function:this.onEdit.bind(this),btnConditionBasedField:""},{label:"HIDE",icon:"assets/images/hide.svg",function:this.onEdit.bind(this),btnConditionBasedField:""},{label:"DELETE",icon:"assets/images/delete-action.svg",function:this.onDelete.bind(this),showBasedCondition:!0,btnConditionBasedField:"isMain"}],t.cols=this.columns,t.isLoading=!1,t.hasPaginator=!0,t.hasFlatActions=!0,t.actionsFlat=this.actions}ngOnInit(){this.getData(),this.getPageChanged()}getData(){this.dataTableService.isLoading=!0,this.subscription.add(this.dataService.postFn("broker/input/list",{skip:this.skip,take:this.take}).subscribe(t=>{this.dataTableService.isLoading=!1,this.dataTableService.totalRecords=t?.total,this.dataTableService.rows.set(t?.data)}))}onEdit(t){}onDelete(t){let e={title:"Are you sure to delete this input?",type:"error",btnLabel:"DELETE"};this.sharedModalService.confirmCard(e).onClose.subscribe(s=>{s=="confirm"&&this.deleteItem(t)})}deleteItem(t){let e=t.inputId;this.subscription.add(this.dataService.deleteFn(`broker/input/delete/${e}`).subscribe(s=>{s?.status&&this.sharedModalService.successBasicCard({title:"Input Deleted Successfully",btnLabel:"THANK_YOU"}).onClose.subscribe(C=>{this.getData()})}))}getPageChanged(){this.subscription.add(this.dataTableService.getPageChanged().subscribe(t=>{this.skip=t.page*t.rows,this.take=t.rows,this.getData()}))}ngOnDestroy(){this.subscription.unsubscribe()}};i.\u0275fac=function(e){return new(e||i)(n(E),n(S),n(I))},i.\u0275cmp=c({type:i,selectors:[["engaz-broker-inputs-list"]],standalone:!0,features:[b],decls:9,vars:3,consts:[[1,"p-4"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","bg-btn","text-white"],[1,"position-relative","shadow","rounded"]],template:function(e,s){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),d(3),m(4,"translate"),o(),a(5,"button",2),d(6,"New Broker Input"),o()(),a(7,"div",3),p(8,"data-table"),o()()),e&2&&(h(3),u(f(4,1,"BROKER_INPUT")))},dependencies:[D,v,g]});let r=i;return r})();export{M as BrokerInputsListComponent};
